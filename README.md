# eyetracker-CPLUS

使用 C++17 编写的亮瞳法视线标定示例，包含：

- 基于瞳孔中心与虹膜耀点重心差向量的线性标定模型。
- 视线预测、瞳孔直径换算、眨眼频率估算等核心指标计算。
- CMake 构建示例，可生成静态库 `eyetracker` 与演示程序 `eyetracker_demo`。

## 构建与运行

```bash
cmake -S . -B build
cmake --build build
./build/eyetracker_demo
```

演示程序会输出标定结果、估算的视线落点、瞳孔直径以及眨眼频率。

## 亮瞳标定方法简介

- 通过近红外补光形成瞳孔亮斑，精确检测瞳孔中心与半径。
- 计算虹膜耀点（角膜反射点）重心，与瞳孔中心的差向量可视为视线方向的代理。
- 收集多个屏幕标定点及对应的差向量，利用最小二乘求解线性映射矩阵。
- 在运行时将最新的差向量代入映射矩阵即可得到屏幕坐标预测。

## 眨眼判定

示例中通过眼睑开合距离（或瞳孔检测失效）判定闭眼，利用闭眼到睁眼的跃迁计次计算眨眼频率。实际产品可结合更精确的眼睑分割或亮度阈值。

